# -*- coding: utf-8 -*-
"""
Created on Sun Oct 20 17:55:53 2019
通过百度地图API获取上海地铁站的经纬度
@author: us
"""

from urllib import request
import re
import pandas as pd
import urllib.parse as urp

def get_location(name,city):  
    # 从百度地图API获取上海地铁站的经纬度
    my_ak = 'TsROtZ4szgcnI3QQdtArZ6aaivtjdLuY'    # 需要自己填写自己的AK
    qurey = urp.quote(name)
    try:
        url = 'http://api.map.baidu.com/place/v2/search?query='+qurey+'&tag='+'&region='+urp.quote(city)+'&output=json&ak='+my_ak
        print(url)
        req = request.urlopen(url)
        res = req.read().decode()
        lat = pd.to_numeric(re.findall('"lat":(.*)',res)[0].split(',')[0])
        lng = pd.to_numeric(re.findall('"lng":(.*)',res)[0])
        return (lng,lat)  #经度和纬度
    except:
        return 0,0

c = get_location('望园路','上海')
print(c)

# 结果格式 (121.507604, 31.266579999999998)

# 以下存储了地铁站的经纬度，（每次运行耗时太多，且每天获取次数有限制）
locat_dict={'七宝': (121.356049, 31.161393),
 '七莘路': (121.36970600000001, 31.137624),
 '三林': (121.517556, 31.148688),
 '三林东': (121.529671, 31.152358000000003),
 '三门路': (121.50162900000001, 31.317166999999998),
 '三鲁公路': (121.512592, 31.130681),
 '上南路': (121.56818, 31.124886),
 '上大路': (121.414775, 31.321458000000003),
 '上海体育场': (121.448551, 31.188157),
 '上海体育馆': (121.443402, 31.188814),
 '上海儿童医学中心': (121.52927700000001, 31.211585999999997),
 '上海动物园': (121.36928400000001, 31.199022999999997),
 '上海南站': (121.43586499999999, 31.159439000000003),
 '上海图书馆': (121.451117, 31.213841),
 '上海大学': (121.39903000000001, 31.321440000000003),
 '上海汽车城': (121.18725, 31.291581),
 '上海游泳馆': (121.448026, 31.185365),
 '上海火车站': (121.462056, 31.255923),
 '上海科技馆': (121.547823, 31.224356),
 '上海西站': (121.409305, 31.268790000000003),
 '上海赛车场': (121.232625, 31.337944),
 '上海马戏城': (121.45850300000001, 31.285845000000002),
 '下南路': (121.54718100000001, 31.177084999999998),
 '世博会博物馆': (121.48881000000002, 31.200208),
 '世博大道': (121.49093700000002, 31.188231),
 '世纪公园': (121.55897900000001, 31.222046000000002),
 '世纪大道': (121.533534, 31.234809999999996),
 '东兰路': (121.39854299999999, 31.161429),
 '东城一路': (121.53870800000001, 31.036319),
 '东安路': (121.461153, 31.197304),
 '东宝兴路': (121.486639, 31.265746000000004),
 '东川路': (121.42632900000001, 31.024465000000003),
 '东方体育中心': (121.48701200000001, 31.159351),
 '东方绿舟': (121.01713899999999, 31.114696999999996),
 '东昌路': (121.521998, 31.239078999999997),
 '东明路': (121.51798400000001, 31.178411999999998),
 '东陆路': (121.585783, 31.288631),
 '东靖路': (121.595386, 31.296646999999997),
 '中兴路': (121.485947, 31.269118),
 '中华艺术宫': (121.50131499999999, 31.190005),
 '中山公园': (121.42551100000001, 31.227831),
 '中山北路': (121.465616, 31.265275),
 '中春路': (121.344743, 31.155953999999998),
 '中潭路': (121.44746699999999, 31.260932),
 '中科路': (121.62918799999998, 31.192942),
 '丰庄': (121.361851, 31.248388000000002),
 '临平路': (121.507604, 31.266579999999998),
 '临沂新村': (121.52355, 31.198789),
 '临港大道': (121.91725500000001, 30.929828999999998),
 '九亭': (121.32593, 31.143606),
 '书院': (121.85722, 30.965002000000002),
 '云台路': (121.506924, 31.187779),
 '云山路': (121.57916499999999, 31.256678000000004),
 '云锦路': (121.464914, 31.17265),
 '五洲大道': (121.59588899999999, 31.308621999999996),
 '五莲路': (121.59454, 31.278007000000002),
 '五角场': (121.52119099999999, 31.303805),
 '交通大学': (121.440977, 31.208554),
 '人民广场': (121.481022, 31.238795),
 '伊犁路': (121.410671, 31.204634000000002),
 '佘山': (121.201875, 31.101349),
 '兆丰路': (121.156828, 31.294652000000003),
 '光明路': (121.62123400000002, 31.339890000000004),
 '共富新村': (121.43940800000001, 31.357246999999997),
 '共康路': (121.453464, 31.325355),
 '凌兆新村': (121.49616, 31.146942),
 '凌空路': (121.730672, 31.198565000000002),
 '刘行': (121.368889, 31.363427),
 '创新中路': (121.680196, 31.21988),
 '剑川路': (121.47360900000001, 31.047926),
 '北新泾': (121.38063999999999, 31.222103999999998),
 '北桥': (121.40558500000002, 31.043567),
 '北洋泾路': (121.559229, 31.245588),
 '北蔡': (121.55876299999998, 31.186466999999997),
 '华夏东路': (121.687321, 31.202995),
 '华夏中路': (121.58883600000001, 31.181362),
 '华夏西路': (121.52125, 31.155549),
 '华宁路': (121.401766, 31.013115999999997),
 '华鹏路': (121.533402, 31.178891999999998),
 '南京东路': (121.49598999999999, 31.244526),
 '南京西路': (121.46593200000001, 31.23413),
 '南浦大桥': (121.51235600000001, 31.211021999999996),
 '南翔': (121.329747, 31.303357000000002),
 '南陈路': (121.405224, 31.327223999999998),
 '博兴路': (121.593414, 31.270058000000002),
 '友谊西路': (121.43444, 31.387466999999997),
 '友谊路': (121.490177, 31.410884000000003),
 '台儿庄路': (121.604474, 31.260303000000004),
 '合川路': (121.39126200000001, 31.172140999999996),
 '同济大学': (121.508532, 31.289027),
 '后滩': (121.48003500000002, 31.177884000000002),
 '周浦东': (121.61360900000001, 31.115609999999997),
 '呼兰路': (121.444158, 31.346101),
 '唐镇': (121.66154399999999, 31.214227),
 '商城路': (121.52288999999999, 31.236125),
 '嘉善路': (121.467353, 31.208615999999996),
 '嘉定北': (121.24401, 31.397409000000003),
 '嘉定新城': (121.26104, 31.335744000000002),
 '嘉定西': (121.234404, 31.383236),
 '嘉松中路': (121.21503999999999, 31.263345),
 '四川北路': (121.489796, 31.265169),
 '四平路': (121.50803700000002, 31.280539),
 '国权路': (121.51676699999999, 31.295034),
 '国际客运中心': (121.504856, 31.255834999999998),
 '场中路': (121.422312, 31.308834),
 '塘桥': (121.52535300000001, 31.215407),
 '复兴岛': (121.56783899999999, 31.28718),
 '外环路': (121.399619, 31.126655),
 '外高桥保税区北': (121.593469, 31.353855),
 '外高桥保税区南': (121.60853999999999, 31.32746),
 '大世界': (121.48588500000001, 31.233128000000004),
 '大华三路': (121.42948799999999, 31.280185999999997),
 '大场镇': (121.423427, 31.293055),
 '大木桥路': (121.47016599999999, 31.200221999999997),
 '大柏树': (121.489755, 31.295206),
 '大渡河路': (121.401707, 31.237534999999998),
 '大连路': (121.519428, 31.263959000000003),
 '天潼路': (121.48878300000001, 31.250088),
 '奉浦大道': (121.419917, 30.938373),
 '奉贤新城': (121.50965500000001, 30.923723),
 '威宁路': (121.393672, 31.220484000000003),
 '娄山关路': (121.41081799999999, 31.216958),
 '嫩江路': (121.538559, 31.320922999999997),
 '学林路': (121.62100000000001, 31.189110999999997),
 '宁国路': (121.53891200000001, 31.274518),
 '安亭': (121.168602, 31.294334999999997),
 '宋园路': (121.418451, 31.202507),
 '宜山路': (121.433677, 31.192763),
 '宝安公路': (121.27668700000001, 31.332499),
 '宝山路': (121.48291, 31.257393),
 '宝杨路': (121.50196399999999, 31.406886),
 '富锦路': (121.431087, 31.398542),
 '小南门': (121.50489499999999, 31.222656),
 '岚皋路': (121.428339, 31.262583000000003),
 '川沙': (121.704499, 31.192885999999998),
 '巨峰路': (121.59553500000001, 31.286325),
 '市光路': (121.538527, 31.328515999999997),
 '常熟路': (121.45662800000001, 31.219964),
 '广兰路': (121.62425, 31.218478),
 '康新公路': (121.62395500000001, 31.136032),
 '延吉中路': (121.54140500000001, 31.294724),
 '延安西路': (121.42357700000001, 31.215771999999998),
 '延长路': (121.46189299999999, 31.278059999999996),
 '张华浜': (121.505376, 31.363646000000003),
 '张江路': (121.635521, 31.194945),
 '张江高科': (121.59419399999999, 31.207786),
 '彭浦新村': (121.457393, 31.314134999999997),
 '徐家汇': (121.442314, 31.201202000000002),
 '徐泾东': (121.305802, 31.194437),
 '徐泾北城': (121.24823300000001, 31.181221999999998),
 '徐盈路': (121.26062399999999, 31.183965999999998),
 '御桥': (121.57710800000001, 31.164485),
 '德平路': (121.570733, 31.251721999999997),
 '惠南': (121.76826499999999, 31.059628999999997),
 '惠南东': (121.800265, 31.032830999999998),
 '成山路': (121.50338700000002, 31.176614),
 '打浦桥': (121.475402, 31.212072999999997),
 '提篮桥': (121.51328000000001, 31.259140999999996),
 '文井路': (121.387437, 31.009176),
 '新场': (121.655561, 31.051514),
 '新天地': (121.48168600000001, 31.221998),
 '新村路': (121.429033, 31.270157),
 '新江湾城': (121.51318799999999, 31.334451),
 '新闸路': (121.45300800000001, 31.235747999999997),
 '昌吉东路': (121.206771, 31.299940000000003),
 '昌平路': (121.44903899999998, 31.240163),
 '星中路': (121.375571, 31.163861999999998),
 '春申路': (121.39233200000001, 31.103958000000002),
 '曲阜路': (121.47803600000002, 31.248288),
 '曲阳路': (121.49733300000001, 31.282156),
 '曹杨路': (121.424411, 31.244676000000002),
 '曹路': (121.689449, 31.277549),
 '望园路': (121.501, 30.905503999999997),
 '朱家角': (121.06083799999999, 31.116640000000004),
 '李子园': (121.396607, 31.274713000000002),
 '杨思': (121.50028999999999, 31.16671),
 '杨树浦路': (121.547192, 31.264546000000003),
 '杨高中路': (121.55514699999999, 31.233821000000002),
 '杨高北路': (121.60942299999999, 31.285853000000003),
 '杨高南路': (121.531902, 31.193346000000002),
 '松江体育中心': (121.23708899999998, 31.022047999999998),
 '松江南站': (121.236737, 30.989169),
 '松江大学城': (121.238922, 31.059718),
 '松江新城': (121.23725900000001, 31.036209000000003),
 '枫桥路': (121.41753999999999, 31.248068),
 '桂林公园': (121.42437199999999, 31.171505),
 '桂林路': (121.424982, 31.181001000000002),
 '桃浦新村': (121.35593700000001, 31.287646999999996),
 '武威路': (121.37131799999999, 31.282825),
 '武宁路': (121.42600700000001, 31.247815999999997),
 '殷高东路': (121.51356200000001, 31.327539),
 '殷高西路': (121.49148000000001, 31.325554999999998),
 '民生路': (121.55161799999999, 31.240963),
 '民雷路': (121.674609, 31.274649),
 '水产路': (121.494702, 31.387092),
 '水城路': (121.398444, 31.205074),
 '汇臻路': (121.53118500000001, 31.031162),
 '汇金路': (121.15833500000001, 31.166940000000004),
 '汉中路': (121.465134, 31.247272),
 '江宁路': (121.45103, 31.250707000000002),
 '江川路': (121.39587399999999, 31.004763),
 '江月路': (121.515208, 31.089985),
 '江杨北路': (121.44623500000002, 31.414233000000003),
 '江浦公园': (121.530635, 31.271843),
 '江浦路': (121.524804, 31.280818),
 '江湾体育场': (121.523234, 31.312296000000003),
 '江湾镇': (121.49163600000001, 31.311153000000004),
 '江苏路': (121.43771399999999, 31.226557),
 '汶水路': (121.45654099999999, 31.298973999999998),
 '沈度公路': (121.58658100000001, 31.090449),
 '沈杜公路': (121.518849, 31.067057000000002),
 '泗泾': (121.26698200000001, 31.123981),
 '洞泾': (121.23703799999998, 31.090390999999997),
 '洲海路': (121.595922, 31.318355),
 '浦三路': (121.54553999999999, 31.157148),
 '浦东国际机场': (121.81508999999998, 31.157478),
 '浦东大道': (121.522732, 31.245352),
 '浦江镇': (121.523046, 31.081471999999998),
 '浦电路': (121.538513, 31.229007),
 '浦航路': (121.551345, 31.049761),
 '海伦路': (121.495621, 31.264853999999996),
 '海天三路': (121.803326, 31.174865999999998),
 '淀山湖大道': (121.08848300000001, 31.140734000000002),
 '淞发路': (121.507047, 31.350777),
 '淞滨路': (121.49938700000001, 31.376563),
 '淞虹路': (121.36601100000001, 31.223954),
 '淮海中路': (121.442526, 31.209211),
 '港城路': (121.58131000000002, 31.359262),
 '源深体育中心': (121.543447, 31.237807),
 '滴水湖': (121.937132, 30.904732),
 '漕宝路': (121.36868, 31.163467999999998),
 '漕河泾开发区': (121.404164, 31.17622),
 '漕溪路': (121.44473899999998, 31.182978000000002),
 '漕盈路': (121.10271000000002, 31.166648),
 '潘广路': (121.362293, 31.370198),
 '灵岩南路': (121.501797, 31.154358000000002),
 '爱国路': (121.559427, 31.286351),
 '环城东路': (121.470082, 30.937138),
 '申江路': (121.63197, 31.270003999999997),
 '白银路': (121.251801, 31.351371),
 '真北路': (121.38888700000001, 31.237861),
 '真如': (121.41383400000001, 31.256496999999996),
 '石龙路': (121.44963, 31.164303999999998),
 '祁华路': (121.38016, 31.328108),
 '祁连山南路': (121.373949, 31.24322),
 '祁连山路': (121.382499, 31.277205),
 '秀沿路': (121.60505800000001, 31.143946000000003),
 '紫藤路': (121.37097, 31.175533),
 '罗南新村': (121.364047, 31.394509999999997),
 '罗山路': (121.599624, 31.159351),
 '美兰湖': (121.356426, 31.407853000000003),
 '翔殷路': (121.54986299999999, 31.313353000000003),
 '耀华路': (121.50115600000001, 31.184181),
 '老西门': (121.49008, 31.224798),
 '联航路': (121.51721200000001, 31.079252),
 '肇嘉浜路': (121.45646299999999, 31.205392),
 '肖塘': (121.449403, 30.968463),
 '自然博物馆': (121.46915200000001, 31.241120000000002),
 '航中路': (121.36145, 31.171346999999997),
 '航头东': (121.62411499999999, 31.060571999999997),
 '航津路': (121.60053899999998, 31.341305),
 '芦恒路': (121.504768, 31.124776),
 '花木路': (121.569227, 31.217570000000002),
 '花桥': (121.11070600000001, 31.304845),
 '芳华路': (121.556519, 31.199405),
 '芳甸路': (121.56461999999999, 31.237703999999997),
 '莘庄': (121.39218600000001, 31.116871999999997),
 '莲溪路': (121.566875, 31.192007),
 '莲花路': (121.40933400000002, 31.136734000000004),
 '蓝天路': (121.584296, 31.247173999999998),
 '蓝村路': (121.53438100000001, 31.217627),
 '虹口足球场': (121.48725900000001, 31.277219),
 '虹桥1号航站楼': (121.35368999999999, 31.197605),
 '虹桥2号航站楼': (121.3327, 31.200616999999998),
 '虹桥火车站': (121.32699699999999, 31.200546999999997),
 '虹桥路': (121.42804299999999, 31.203176000000003),
 '虹梅路': (121.40393200000001, 31.166072999999997),
 '虹漕路': (121.41703100000001, 31.170192),
 '虹莘路': (121.383801, 31.163388),
 '蟠龙路': (121.28513799999999, 31.192486),
 '行知路': (121.428059, 31.291225),
 '衡山路': (121.451071, 31.208455999999998),
 '褚光路': (121.29782, 31.203062),
 '西渡': (121.440154, 30.996169000000002),
 '西藏北路': (121.47525, 31.2694),
 '西藏南路': (121.497254, 31.204901),
 '豫园': (121.498731, 31.232713),
 '赤峰路': (121.488997, 31.286969),
 '赵巷': (121.198705, 31.167509999999996),
 '远东大道': (121.76203000000001, 31.205140999999998),
 '通河新村': (121.447965, 31.337451),
 '邮电新村': (121.50236799999999, 31.276892999999998),
 '醉白池': (121.23751599999999, 31.007759999999998),
 '野生动物园': (121.72799499999999, 31.06138),
 '金京路': (121.62220500000001, 31.285413000000002),
 '金吉路': (121.635116, 31.270009),
 '金平路': (121.416547, 31.017172),
 '金桥': (121.617822, 31.266301000000002),
 '金桥路': (121.58833700000001, 31.263276),
 '金沙江西路': (121.34104099999999, 31.247314000000003),
 '金沙江路': (121.359843, 31.248811),
 '金海湖': (121.505, 30.91), # (117.310896, 40.187348)
 '金海路': (121.64533200000001, 31.269219),
 '金科路': (121.608557, 31.209932000000002),
 '金运路': (121.326035, 31.247367999999998),
 '铁力路': (121.46784199999999, 31.414309000000003),
 '银都路': (121.401967, 31.097962),
 '锦江乐园': (121.415479, 31.145542),
 '锦绣路': (121.546552, 31.193648),
 '镇坪路': (121.43686399999999, 31.252819),
 '长寿路': (121.44476200000001, 31.246717999999998),
 '长江南路': (121.49818, 31.337846999999996),
 '长清路': (121.492645, 31.180329999999998),
 '闵瑞路': (121.536901, 31.054121000000002),
 '闵行开发区': (121.37650900000001, 31.006271999999996),
 '陆家嘴': (121.50898400000001, 31.243812),
 '陆家浜路': (121.492691, 31.217388),
 '陈春路': (121.558126, 31.179243),
 '陕西南路': (121.465323, 31.221939000000003),
 '隆德路': (121.430026, 31.236733),
 '隆昌路': (121.550831, 31.281347999999998),
 '青浦新城': (121.13190300000001, 31.164547),
 '静安寺': (121.45167099999999, 31.229810999999998),
 '鞍山新村': (121.516066, 31.278921999999998),
 '顾唐路': (121.66308899999999, 31.272153000000003),
 '顾戴路': (121.350017, 31.128211),
 '顾村公园': (121.38368899999999, 31.346915000000003),
 '颛桥': (121.407141, 31.071875),
 '马当路': (121.48338500000001, 31.215626),
 '马陆': (121.28343000000001, 31.325402),
 '高科西路': (121.516553, 31.191403),
 '高青路': (121.522143, 31.165436),
 '鲁班路': (121.48098799999998, 31.20494),
 '鹤沙航城': (121.61785, 31.083657000000002),
 '黄兴公园': (121.536425, 31.299442),
 '黄兴路': (121.530832, 31.286385),
 '黄陂南路': (121.479798, 31.228753),
 '龙华': (121.45922900000001, 31.179259000000002),
 '龙华中路': (121.46334399999999, 31.19094),
 '龙柏新村': (121.376928, 31.183294),
 '龙溪路': (121.38674099999999, 31.200046999999998),
 '龙漕路': (121.45043000000001, 31.176190999999996),
 '龙耀路': (121.466196, 31.165971999999996),
 '龙阳路': (121.56405, 31.209165999999996)}